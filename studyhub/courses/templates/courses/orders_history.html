{% extends 'courses/base.html' %}

{% block title %}Мои заказы — EdPro{% endblock %}

{% block content %}
<h1 class="mb-4">Мои заказы</h1>

{% if orders %}
    <div class="list-group">
        {% for order in orders %}
        <div class="list-group-item">
            <div class="d-flex justify-content-between align-items-center mb-2">
                <div>
                    <strong>Заказ № {{ order.id }}</strong><br>
                    <small class="text-muted">от {{ order.created_at|date:"d.m.Y H:i" }}</small>
                </div>
                <span class="badge
                    {% if order.status == 'paid' %}bg-success
                    {% elif order.status == 'delivering' %}bg-primary
                    {% else %}bg-secondary{% endif %}">
                    {{ order.get_status_display }}
                </span>
            </div>
            <ul class="mb-2">
                {% for item in order.items.all %}
                <li>
                    {{ item.course.title }} — {{ item.price }} ₽
                </li>
                {% endfor %}
            </ul>
            <p class="mb-0">
                <strong>Итого:</strong> {{ order.total_amount }} ₽
            </p>
        </div>
        {% endfor %}
    </div>
{% else %}
    <div class="alert alert-info">
        У вас пока нет оформленных заказов.
    </div>
    <a href="{% url 'course_list' %}" class="btn btn-primary">
        Выбрать курсы
    </a>
{% endif %}
{% endblock %}


